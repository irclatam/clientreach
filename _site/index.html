<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The IRC in Latin America – IRC Latam</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-79108a0fc1995748cbd19a5b0e3e3e7c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">IRC Latam</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why-an-estimate-and-not-a-definite-number" id="toc-why-an-estimate-and-not-a-definite-number" class="nav-link active" data-scroll-target="#why-an-estimate-and-not-a-definite-number">Why an estimate, and not a definite number?</a></li>
  <li><a href="#how-many-more-people-is-that-compared-to-past-years" id="toc-how-many-more-people-is-that-compared-to-past-years" class="nav-link" data-scroll-target="#how-many-more-people-is-that-compared-to-past-years">How many more people is that compared to past years?</a></li>
  <li><a href="#where-did-this-happen" id="toc-where-did-this-happen" class="nav-link" data-scroll-target="#where-did-this-happen">Where did this happen?</a></li>
  <li><a href="#can-i-see-more-detail-by-sector-and-gender" id="toc-can-i-see-more-detail-by-sector-and-gender" class="nav-link" data-scroll-target="#can-i-see-more-detail-by-sector-and-gender">Can I see more detail by sector and gender?</a></li>
  <li><a href="#how-does-the-model-work" id="toc-how-does-the-model-work" class="nav-link" data-scroll-target="#how-does-the-model-work">How does the model work?</a></li>
  <li><a href="#for-those-looking-for-more-technical-details" id="toc-for-those-looking-for-more-technical-details" class="nav-link" data-scroll-target="#for-those-looking-for-more-technical-details">For those looking for more technical details</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The IRC in Latin America</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout-irc">
<p><span class="big-number">📢</span> In <strong>FY24</strong>, the IRC reached an estimated <span class="big-number">331k</span> clients across <strong>Latin America</strong>.</p>
</div>
<section id="why-an-estimate-and-not-a-definite-number" class="level3">
<h3 class="anchored" data-anchor-id="why-an-estimate-and-not-a-definite-number">Why an estimate, and not a definite number?</h3>
<p>Counting people reached by humanitarian services sounds straightforward. In reality, it rarely is.</p>
<p>The IRC’s first priority is to deliver help, not to collect data or complete paperwork. If someone comes for support but doesn’t wish to share personal details, we don’t turn them away. In emergencies, collecting demographic information can be impractical, even unsafe. We don’t insist on it. This means we can’t necessarily track whether a given individual who used one service later used another. And because many clients receive more than one type of service—health care, protection, education, or livelihoods—we can’t simply add up service counts. That would inflate the total through double-counting.</p>
<p>That does not mean measurement is taken lightly. Instead, the IRC in Latam uses a statistical model built on our Annual Statistics, which track progress across individual services. The model blends these service counts with assumptions about overlap and uncertainty, giving us an estimate of unique clients—and a way to report how confident we are in that number.</p>
<p>The result: <strong>in FY24 the IRC reached around 331,000 people in Latin America</strong>. Statistically, we are 90% confident the true figure lies between 319,000 and 345,000. (This does not yet include people reached through online or mass-media campaigns such as the Signpost project.)</p>
<p>The number is an estimate, but not a guess. It reflects hundreds of thousands of real encounters with people seeking help. And it reflects a rigorous effort to find the balance between helping people when they need it, and making sure we know our reach.</p>
<p>For now, in the next sections, we’ll stick with presenting the model’s central estimates, not the uncertainty. But shortly I’ll explain more about how the model works and how it gives a confidence interval.</p>
</section>
<section id="how-many-more-people-is-that-compared-to-past-years" class="level3">
<h3 class="anchored" data-anchor-id="how-many-more-people-is-that-compared-to-past-years">How many more people is that compared to past years?</h3>
<p>Since <strong>FY19</strong>, IRC’s presence in Latin America has increased more than seven-fold, from <strong>44,000 people</strong> to <strong>331,000 people</strong>. Starting in 2019, the IRC’s footprint was modest, rising to 452,000 in 2022, before tailing off. 331k per year represents around 900 people receiving a service per day. Figure 1 shows the sharp rise in client numbers.</p>
<section id="figure-1.-how-many-clients-did-the-irc-reach-between-2019-and-2024" class="level4">
<h4 class="anchored" data-anchor-id="figure-1.-how-many-clients-did-the-irc-reach-between-2019-and-2024">Figure 1. How many clients did the IRC reach between 2019 and 2024?</h4>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-2e84abb36cc84c8463b3" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-2e84abb36cc84c8463b3">{"x":{"data":[{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036],"base":[0,0,0,0,0],"x":[1,2,3,4,5],"y":[43800.609538912679,111833.13151714728,172909.40561366634,452169.42380705406,372050.53878029075],"text":["FY19<br>43.8K clients","FY20<br>111.8K clients","FY21<br>172.9K clients","FY22<br>452.2K clients","FY23<br>372.1K clients"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,171,0,0.7)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"#FFAB00","legendgroup":"#FFAB00","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[6],"y":[330607.85885330598],"text":"FY24<br>330.6K clients","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,82,204,0.7)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"#0052CC","legendgroup":"#0052CC","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.228310502283108,"r":7.3059360730593621,"b":29.821502698215031,"l":42.839352428393525},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,6.5999999999999996],"tickmode":"array","ticktext":["FY19","FY20","FY21","FY22","FY23","FY24"],"tickvals":[1,2,3,3.9999999999999996,5,6],"categoryorder":"array","categoryarray":["FY19","FY20","FY21","FY22","FY23","FY24"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"Roboto Mono","size":15.940224159402241},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"Inter","size":23.910336239103362}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-4521.6942380705405,474777.89499740675],"tickmode":"array","ticktext":["0","100K","200K","300K","400K"],"tickvals":[0,100000,200000,300000,400000],"categoryorder":"array","categoryarray":["0","100K","200K","300K","400K"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"Inter","size":15.940224159402243},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"Inter","size":23.910336239103362}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1bcf6cb5d674":{"x":{},"y":{},"fill":{},"text":{},"type":"bar"}},"cur_data":"1bcf6cb5d674","visdat":{"1bcf6cb5d674":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Estimate of the number of clients reach across all countries and service types / sectors, based on IRC Latam’s model. Figures are the median values generated by the model. Hover over the bars to see the numbers.</p>
</div>
</div>
</section>
</section>
<section id="where-did-this-happen" class="level3">
<h3 class="anchored" data-anchor-id="where-did-this-happen">Where did this happen?</h3>
<p>Much of this increase has come from the expansion of the IRC’s presence across different countries. In particular, IRC began working in Venezuela in FY20. IRC’s work in Ecuador, Peru and Mexico contributed significantly. At the same time, IRC’s work in Colombia and North Central America ramped up considerably during the period. The</p>
<section id="figure-2.-which-countries-did-the-irc-work-in-to-reach-clients" class="level4">
<h4 class="anchored" data-anchor-id="figure-2.-which-countries-did-the-irc-work-in-to-reach-clients">Figure 2. Which countries did the IRC work in to reach clients?</h4>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-3f60c33f598ced5aa137" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-3f60c33f598ced5aa137">{"x":{"data":[{"x":[1,2,3,4,5,6],"y":[43038.14110626516,92751.617541806525,110544.04478259616,189332.70872180336,159978.81580105092,16873.63884099053],"text":["FY19<br>43K clients<br>Colombia","FY20<br>92.8K clients<br>Colombia","FY21<br>110.5K clients<br>Colombia","FY22<br>189.3K clients<br>Colombia","FY23<br>160K clients<br>Colombia","FY24<br>16.9K clients<br>Colombia"],"type":"scatter","mode":"lines","line":{"width":4.5354330708661417,"color":"rgba(255,86,48,0.7)","dash":"solid"},"hoveron":"points","name":"Colombia","legendgroup":"Colombia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3,4,5,6],"y":[1213.1438035199467,60866.619841458232,18507.646216779805,26443.706465770341],"text":["FY21<br>1.2K clients<br>Ecuador","FY22<br>60.9K clients<br>Ecuador","FY23<br>18.5K clients<br>Ecuador","FY24<br>26.4K clients<br>Ecuador"],"type":"scatter","mode":"lines","line":{"width":4.5354330708661417,"color":"rgba(0,82,204,0.7)","dash":"solid"},"hoveron":"points","name":"Ecuador","legendgroup":"Ecuador","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4,5,6],"y":[32065.05916754753,76805.549957145617,100434.47616961604],"text":["FY22<br>32.1K clients<br>El Salvador","FY23<br>76.8K clients<br>El Salvador","FY24<br>100.4K clients<br>El Salvador"],"type":"scatter","mode":"lines","line":{"width":4.5354330708661417,"color":"rgba(0,102,68,0.7)","dash":"solid"},"hoveron":"points","name":"El Salvador","legendgroup":"El Salvador","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4,5,6],"y":[3590.9234411938037,14203.980874597131,18752.751676510259],"text":["FY22<br>3.6K clients<br>Guatemala","FY23<br>14.2K clients<br>Guatemala","FY24<br>18.8K clients<br>Guatemala"],"type":"scatter","mode":"lines","line":{"width":4.5354330708661417,"color":"rgba(54,179,126,0.7)","dash":"solid"},"hoveron":"points","name":"Guatemala","legendgroup":"Guatemala","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4,5,6],"y":[14018.879264031088,9521.4760815294849,13903.384930892982],"text":["FY22<br>14K clients<br>Honduras","FY23<br>9.5K clients<br>Honduras","FY24<br>13.9K clients<br>Honduras"],"type":"scatter","mode":"lines","line":{"width":4.5354330708661417,"color":"rgba(171,245,209,0.7)","dash":"solid"},"hoveron":"points","name":"Honduras","legendgroup":"Honduras","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2,3,4,5,6],"y":[2044.9410658019019,16361.581059010479,23829.226180638008,16574.63771746539,14395.737910145988],"text":["FY20<br>2K clients<br>Mexico","FY21<br>16.4K clients<br>Mexico","FY22<br>23.8K clients<br>Mexico","FY23<br>16.6K clients<br>Mexico","FY24<br>14.4K clients<br>Mexico"],"type":"scatter","mode":"lines","line":{"width":4.5354330708661417,"color":"rgba(23,43,77,0.7)","dash":"solid"},"hoveron":"points","name":"Mexico","legendgroup":"Mexico","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3],"y":[767.44129786095732,4598.2204710786709,3018.4696640454522],"text":["FY19<br>767 clients<br>NCA","FY20<br>4.6K clients<br>NCA","FY21<br>3K clients<br>NCA"],"type":"scatter","mode":"lines","line":{"width":4.5354330708661417,"color":"rgba(0,184,217,0.7)","dash":"solid"},"hoveron":"points","name":"NCA","legendgroup":"NCA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4,5,6],"y":[11205.287017070956,41925.745726072302,34964.133860577465],"text":["FY22<br>11.2K clients<br>Peru","FY23<br>41.9K clients<br>Peru","FY24<br>35K clients<br>Peru"],"type":"scatter","mode":"lines","line":{"width":4.5354330708661417,"color":"rgba(101,84,192,0.7)","dash":"solid"},"hoveron":"points","name":"Peru","legendgroup":"Peru","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2,3,4,5,6],"y":[12534.444234252667,41908.525342652421,118618.26352033236,32547.938156471624,104953.72526136244],"text":["FY20<br>12.5K clients<br>Venezuela","FY21<br>41.9K clients<br>Venezuela","FY22<br>118.6K clients<br>Venezuela","FY23<br>32.5K clients<br>Venezuela","FY24<br>105K clients<br>Venezuela"],"type":"scatter","mode":"lines","line":{"width":4.5354330708661417,"color":"rgba(255,171,0,0.7)","dash":"solid"},"hoveron":"points","name":"Venezuela","legendgroup":"Venezuela","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.228310502283108,"r":7.3059360730593621,"b":29.821502698215031,"l":42.839352428393525},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,6.5999999999999996],"tickmode":"array","ticktext":["FY19","FY20","FY21","FY22","FY23","FY24"],"tickvals":[1,2,3,3.9999999999999996,5,6],"categoryorder":"array","categoryarray":["FY19","FY20","FY21","FY22","FY23","FY24"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"Roboto Mono","size":15.940224159402241},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"Inter","size":23.910336239103362}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1118.2113763784666,198760.97209300048],"tickmode":"array","ticktext":["0","50K","100K","150K"],"tickvals":[0,50000,100000,150000],"categoryorder":"array","categoryarray":["0","50K","100K","150K"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"Inter","size":15.940224159402243},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"Inter","size":23.910336239103362}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"Inter","size":11.955168119551681},"title":{"text":"Country","font":{"color":null,"family":null,"size":0}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1bcf46c2a64c":{"x":{},"y":{},"colour":{},"text":{},"type":"scatter"}},"cur_data":"1bcf46c2a64c","visdat":{"1bcf46c2a64c":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Each line shows the estimated clients per country. From FY19 to FY21, North Central America (NCA) was counted as a single country. From FY22 the numbers were separated out. Click on the lines or the countries in the legend to add or remove from the figure.</p>
</div>
</div>
</section>
</section>
<section id="can-i-see-more-detail-by-sector-and-gender" class="level3">
<h3 class="anchored" data-anchor-id="can-i-see-more-detail-by-sector-and-gender">Can I see more detail by sector and gender?</h3>
<p>Yes! The Annual Statistics is a set of more than 400 figures collected yearly across sectors. Using these figures we can break down the client count by sector and gender. Note that not all indicators are collected by gender. Some indicators are just overall service numbers. This is often the case for informational services, or services like vaccinations. In these cases, the statstical model imputes a the figures by gender, based on existing gender ratios at different levels (ie, within a region, within a country, and by sector). Figure 3 shows the median client count across all simulations, divided by sector, with female, male and total values displayed.</p>
<section id="figure-3.-sector-and-gender-breakdowns-for-services-in-fy24" class="level4">
<h4 class="anchored" data-anchor-id="figure-3.-sector-and-gender-breakdowns-for-services-in-fy24">Figure 3. Sector and gender breakdowns for services in FY24</h4>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-3d2003a71bae6a584f4b" style="width:100%;height:371px;"></div>
<script type="application/json" data-for="htmlwidget-3d2003a71bae6a584f4b">{"x":{"data":[{"orientation":"v","width":[0.30000000000000027,0.29999999999999982,0.29999999999999982,0.30000000000000071,0.30000000000000004],"base":[0,0,0,0,0],"x":[1.8333333333333333,2.8333333333333335,3.8333333333333335,4.833333333333333,0.83333333333333326],"y":[9940.9085745936609,215679.28087334117,154483.54028386841,104905.29250877397,38042.537526463486],"text":["Education<br>Female<br>9.9K clients","Health<br>Female<br>215.7K clients","Power<br>Female<br>154.5K clients","Safety<br>Female<br>104.9K clients","Economic<br />wellbeing<br>Female<br>38K clients"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,86,48,0.7)","line":{"width":1.8897637795275593,"color":"rgba(255,255,255,1)"}},"name":"Female","legendgroup":"Female","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.29999999999999982,0.29999999999999982,0.30000000000000027,0.30000000000000071,0.29999999999999993],"base":[0,0,0,0,0],"x":[2,3,4,5,1],"y":[18436.970971843417,303205.35171884595,238275.89715199234,141858.00931245551,50371.874144731293],"text":["Education<br>Total<br>18.4K clients","Health<br>Total<br>303.2K clients","Power<br>Total<br>238.3K clients","Safety<br>Total<br>141.9K clients","Economic<br />wellbeing<br>Total<br>50.4K clients"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,82,204,0.7)","line":{"width":1.8897637795275593,"color":"rgba(255,255,255,1)"}},"name":"Total","legendgroup":"Total","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.29999999999999982,0.29999999999999982,0.30000000000000071,0.30000000000000071,0.29999999999999982],"base":[0,0,0,0,0],"x":[2.1666666666666665,3.1666666666666665,4.166666666666667,5.166666666666667,1.1666666666666667],"y":[8463.0915052723049,87109.928108489417,84192.327904104823,36996.996696574097,12303.39570698814],"text":["Education<br>Male<br>8.5K clients","Health<br>Male<br>87.1K clients","Power<br>Male<br>84.2K clients","Safety<br>Male<br>37K clients","Economic<br />wellbeing<br>Male<br>12.3K clients"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,171,0,0.7)","line":{"width":1.8897637795275593,"color":"rgba(255,255,255,1)"}},"name":"Male","legendgroup":"Male","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":28.785388127853885,"r":7.3059360730593621,"b":32.378580323785812,"l":42.839352428393525},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["Economic<br />wellbeing","Education","Health","Power","Safety"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Economic<br />wellbeing","Education","Health","Power","Safety"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"Inter","size":15.940224159402243},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"Inter","size":21.253632212536321}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3032.0535171884594,318365.61930478824],"tickmode":"array","ticktext":["0","100K","200K","300K"],"tickvals":[0,100000,200000,300000],"categoryorder":"array","categoryarray":["0","100K","200K","300K"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"Roboto Mono","size":15.940224159402243},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"Inter","size":21.253632212536321}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"Inter","size":15.940224159402243},"title":{"text":"Gender","font":{"color":"rgba(0,0,0,1)","family":"Inter","size":21.253632212536321}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1bcf3df7aae6":{"x":{},"y":{},"fill":{},"text":{},"type":"bar"}},"cur_data":"1bcf3df7aae6","visdat":{"1bcf3df7aae6":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Health represents the largest number of clients for the IRC in Latin America and a majority of services are delivered to women.</p>
</div>
</div>
<p>You might be thinking, why don’t the total numbers for each sector add up to the 331k clients? That’s because the total accounts for double counting between sectors, ie, if a single person uses many services.</p>
</section>
</section>
<section id="how-does-the-model-work" class="level3">
<h3 class="anchored" data-anchor-id="how-does-the-model-work">How does the model work?</h3>
<p>The doesn’t directly count clients because this would mean collecting data about all people who receive services. We don’t want to create barriers to our services, and some people feel uncomfortable sharing their details. In acute emergencies, it can also be logistically challenging to collect this information. Instead, we count the services provided as part of the Annual Statistics process to estimate the number of clients we served.</p>
<p>Using these data collected, we run statistical simulations to estimate the total number of clients: around 331 thousand in Latin. But we also give a range—our best guess is 331k and we’re 90% confident that the number lies between 319k and 345k.</p>
<p>How does the statistical model work? We perform simulations to account for various uncertainties in the data, like errors in counting services or people receiving multiple services, or cases where we don’t collect information on a person’s gender. We run the simulation over and over to give us realistic scenarios of the total client count if there are small variations in the underlying data and assumptions. The results give us more confidence in the estimate while factoring in things like measurement error and overlaps between different services.</p>
<p>Figure 4 shows the results of 151 simulations. Each dot represents a different simulation (count them just to be sure!). The yellow dot is the central estimate, and the purple ones show a 90% confidence interval. The grey ones are outlier results of the simulations. In other words, they are less likely to be the true value.</p>
<p>Since the simulations are run at a country level, we also have country-by-country estimates.</p>
<section id="figure-4.-the-151-simulation-results-of-the-statistical-model" class="level4">
<h4 class="anchored" data-anchor-id="figure-4.-the-151-simulation-results-of-the-statistical-model">Figure 4. The 151 simulation results of the statistical model</h4>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>So those are the results of the full model for Latin America. But since the Annual Statistics are collected by country, we can also show the results at a country level. Figure 5 shows the range of estimates generated for each country.</p>
<p>This chart shows the central estimate for each country (the dot) as well as the plausible range of values (the thin line is the 95% confidence interval and the thick line is the 66% confidence interval). The text shows the median, or central estimate (ie, the value shown by the dot).</p>
</section>
<section id="figure-5.-model-results-by-country" class="level4">
<h4 class="anchored" data-anchor-id="figure-5.-model-results-by-country">Figure 5. Model results by country</h4>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="for-those-looking-for-more-technical-details" class="level3">
<h3 class="anchored" data-anchor-id="for-those-looking-for-more-technical-details">For those looking for more technical details</h3>
<p>The IRC doesn’t count each client individually. Instead, we track service deliveries, but we recognise that some clients receive multiple services, which could lead to an overcount. And that we maybe didn’t count everything correctly, which could lead to an undercount. To avoid this, we use a statistical model to simulate different scenarios that account for potential sources of uncertainty.</p>
<ol type="1">
<li><strong>Uncertainty about the precision of service counts</strong>. We assume there could be small errors in how services are counted. For example, sometimes data collection might be incomplete or inaccurate due to limitations in reporting systems or challenges in fieldwork. There might also be small inconsistencies in the way that data are collected from location to location.</li>
<li><strong>Cases where gender of service recipients isn’t recorded</strong>. In some cases we collect and record demographic data on gender from clients. In others we don’t. We therefore have to estimate this breakdown in that subset of cases.</li>
<li><strong>Uncertainty about the reach of health programming</strong>. This is where we face significant uncertainty. While we know the number of people potentially eligible for health services (the catchment area where we operate), it’s difficult to know exactly how many people actually receive them. We also directly count some health services but not all. If someone drops-in for a reproductive health information session, we might not note that down. People might also drop out of programs, move, or not report their participation. To account for this uncertainty, we simulate different scenarios using a statistical approach that helps us estimate the range of potential values for the number of people who were truly reached.</li>
<li><strong>Overlap between service areas</strong>. Since many clients use multiple services (eg, a person might receive both education and health services), we need to account for this overlap. If we simply added up the people receiving each service, we’d risk double-counting the same individuals. Our models simulate how much overlap is likely and adjust for it. In this case, we estimate that around 51% of the total population (on average) may have received more than one type of service. We randomly vary this percentage to get a sense of potential sensitivity of our overall calculations to changes in this percentage.</li>
</ol>
<p><strong>Step-by-step model explanation</strong></p>
<ul>
<li><strong>Step 1. Adjusting service counts.</strong> In Step 1, we adjust the indicator data by factoring in the regional averages for services, smoothing out any large discrepancies. This helps us reduce errors that could arise due to incomplete or inconsistent data across different countries or regions. For example, we use a blending weight to adjust the numbers closer to regional norms, which helps us account for country-specific biases or gaps.</li>
<li><strong>Step 2. Estimate gender breakdown where gender was not recorded.</strong> For some indicators we know the male / female breakdown, for others we don’t. For each indicator where it’s not known we estimate it. This is done by creating a weighted average of three gender ratios: the country gender ratio, the regional ratio and the sector ratio. In each simulation, a random weight is applied to each of these ratios, and the average of those ratios is then used to estimate male and femal clients, per indicator. This means that in each simualtion the gender numbers are diffierent.</li>
<li><strong>Step 3. Estimate plausible values for health reach.</strong> In Step 3, we use a logarithmic weighting function to adjust health service reach estimates based on the ratio of directly measured health services to the catchment area. For each simulation, this function compares the health catchment number with the total number of services, and asks the question, are these numbers consistent? The function assigns a weight that determines how much we should rely on observed service counts versus the total population in the catchment area.
<ul>
<li>⁠Low health presence → The model relies more on observed service counts.</li>
<li>High health presence → The model shifts the estimate toward the total population.</li>
</ul></li>
<li>This transformation ensures that service reach estimates don’t unrealistically overshoot when observed counts are high, while still adjusting upward when observed counts are low relative to population size. The use of a logarithmic function is key here because it smoothly scales the weight rather than applying a hard cutoff, ensuring a more gradual transition between low and high service presence scenarios.</li>
<li><strong>Step 4.</strong> <strong>Monte Carlo simulations.</strong> Monte Carlo simulations are a technique used to model uncertainty and explore different possible outcomes when there are many uncertain variables. In the context of our model, in Step 4 we use Monte Carlo simulations to generate a wide range of plausible values for our final estimates. Monte Carlo simulations let us explore many different possible scenarios, based on real-world uncertainty, and generate a more accurate and reliable range for the number of clients served.</li>
</ul>
<p>By combining these methods—adjusting for service count uncertainties, using logarithmic functions to better handle skewed data, and running Monte Carlo simulations to account for uncertainty—we can make more informed estimates and better understand the reach and impact of our services. The simulations give us confidence that the range we report (eg, 319 thousand to 345 thousand) reflects a wide range of possible real-world outcomes, and not just a single estimate.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>